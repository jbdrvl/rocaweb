# JMETER SCRIPT FILES FOR HACKAZON
* script.jmx:
    * status
    * CSV files
    * main actions

## IMPORTANT
**ALL OF THE DATA IN THE CSV FILES IS FAKE. IT WAS RANDOMLY GENERATED BY SCRIPTS AND IS IN NO WAY LINKED TO REAL PERSONS.**

**THE CREDIT CARDS MENTIONNED IN SOME CSV FILES ARE FAKE AS WELL AND CANNOT BE USED FOR REAL PURCHASES.**

**THE NAMES, ADDRESSES, PHONE NUMBERS AND EMAILS/PASSWORD ARE FAKE AS WELL.**

Go to [mockaroo.com](https://mockaroo.com) for more information.

## SEARCH BAR
```
./rocaweb-scripts/launch.sh -d ./docker/ -j /home/rocaweb/Téléchargements/ -a ./rocaweb-scripts/Installation-setup/jmeter-scripts-OK-ATCK/ATCK/search_bar_ATCK.jmx -t ./rocaweb-scripts/Installation-setup/jmeter-scripts-OK-ATCK/OK/search_bar_OK.jmx -w hackazon
```
* **search\_bar\_OK.jmx**:
    * STATUS: **OK**
    * CSV FILE: *search\_bar\_data\_OK\_500.csv*
    * MAIN ACTION IN SCRIPT:
        * search random item in search bar, for random category, price range, quality, and brand.

* **search\_bar\_ATCK.jmx**:
    * STATUS: **OK**
    * CSV FILE: *search\_bar\_data\_ATCK\_1000.csv*
    * MAIN ACTION IN SCRIPT:
        * search item in search bar: test *searchString*, *price*, *quality*, *brands* and *id* parameters
    * **search\_bar\_data\_ATCK\_1000.csv**:
        * This file contains random (data, datatype) pairs, which one can get using **./ATCK-data-construction/generateAtckCSV.py**. This Python script takes as input a CSV file with specific data (/datatypes) and randomly choose some (data, datatype) pairs to create the finale file. This specific file was generated using **./ATCK-data-construction/search_bar_data_ATCK_500_ordered.csv**.

## CONTACT US + FAQ
**[INFO]** These scripts work well with only FAQ samplers enabled. Contact-us samplers (and CSV) are disabled because it takes too much time producing ModSecurity rules for them. 

* **contact\_faq\_OK.jmx**:
    * STATUS: **OK**
    * CSV FILES: 
        * *faq\_data\_OK\_500.csv*, 
        * *contact\_us\_data\_OK\_500.csv*
    * MAIN ACTION IN SCRIPT:
        * send a message through *Contact Us* page
        * ask a question on *FAQ* page
    * CONTACT\_US DATA:
        * The CSV file contains Json objects because the *Contact Us* page requires Json objects as parameters. To generate this file, one can use Mockaroo to generate a Json file and then use **./ATCK-data-construction/jsonToCSV.py** to *convert* the Json file into a CSV file readable by JMeter. 
         
* **contact\_faq\_ATCK.jmx**:
    * STATUS: 
        * FAQ and Contact Us: **IN PROGRESS**: *contact\_us\_data*
        * FAQ only: **OK**
    * CSV FILES:
        * *faq\_data\_OK\_1000.csv*, 
        * *faq\_data\_ATCK\_1000.csv*, 
        * *contact\_us\_json\_data\_ATCK\_1000.csv*, 
        * *contact\_us\_random\_data\_ATCK\_1000.csv*
    * MAIN ACTION IN SCRIPT:
        * send a message through *Contact Us* page
        * ask a question on *FAQ* page: test *userEmail*, *userQuestion*, *crsf_faq*
    * **contact\_us\_json\_data\_ATCK\_1000.csv**:
        * The CSV file contains Json objects because the *Contact Us* page requires Json objects as parameters. To generate this file, one can use Mockaroo to generate a Json file and then use **./ATCK-data-construction/jsonToCSV.py** to *convert* the Json file into a CSV file readable by JMeter.
    * **faq\_data\_ATCK\_1000.csv** and **contact\_us\_random\_data\_ATCK\_1000.csv**:
        * These files contain random (data, datatype) pairs, which we can get using **./ATCK-data-construction/generateAtckCSV.py**. This Python script takes as input a CSV file with specific data (/datatypes) and randomly choose some (data, datatype) pairs to create the finale file. These specific files were both generated using **./ATCK-data-construction/faq_data_ATCK_500_ordered.csv**.

## PURCHASE ITEM
* **purchase\_OK.jmx**:
	* STATUS: **OK**
	* CSV FILES: *purchase_data_OK_200.csv*
	* MAIN ACTIONS IN SCRIPT:
	    * users sign up
	    * add a random item to their cart
	    * buy the item
	        * payment info
	        * shipping info
	        * billing info
	        * confirmation of the order

* **purchase\_ATCK.jmx**:
    * STATUS: **OK**
    * CSV FILES:
        * *purchase_data_OK_500.csv*
        * *purchase_data_ATCK_500.csv*
    * MAIN ACTIONS IN SCRIPT: 
        * add item to cart
        * contact info: address, phone, etc...
        * shipping and payment info

* **signup\_ATCK.jmc**:
    * STATUS: **OK**
    * CSV FILES: 
        * *purchase_data_OK_500.csv*
        * *purchase_data_ATCK_500.csv*
    * MAIN ACTION IN SCRIPT: 
        * sign up
				
## WISHLIST 
**[Error]** Hackazon uses URLs to send data so RoCaWeb creates a rule for each URL (e.g. wishlist/edit/2 != wishlist/edit/3)
* **wishlist\_OK.jmx**:
	* STATUS: **OK BUT** error displayed above
	* CSV FILES: *wishlist\_python\_data\_OK\_200.csv*, *wishlist\_mockaroo\_data\_OK\_200.csv*
	* MAIN ACTIONS IN SCRIPT:
	    * create default wishlist (0)
	    * edit wishlist 0
	    * create public wishlist (1)
	    * delete wishlist 0
	    * add item to wishlist 1
	    * search for someone else's wishlist
	    * look at wishlist

* **wishlist\_ATCK.jmx**:
    * STATUS: **OK BUT** error displayed above
	* CSV FILE: *wishlist_data_ATCK_200.csv*, *wishlist\_mockaroo\_data\_OK\_200.csv*
	* MAIN ACTIONS IN SCRIPT:
	    * edit/add wishlist: id, name, public/private, csrf
	    * add item to wishlist
	    * search for someone's wishlist
    * **wishlist_data_ATCK_200.csv**:
        * This file contains random (data, datatype) pairs, which one can get using **./ATCK-data-construction/generateAtckCSV.py**. This Python script takes as input a CSV file with specific data (/datatypes) and randomly choose some (data, datatype) pairs to create the finale file. This specific file was generated using **./ATCK-data-construction/wishlist_data_ATCK_300_ordered.csv**.
	
## PYTHON SCRIPTS
The **atckResults.py** scripts are not yet ready to be used by users for any application. But they can serve as a basis to write scripts that will analyze the resulsts to display information on the different algorithms (number of true positives, etc...)
They are so far just written to be used for *purchase* and *signup* data. They take as input the results CSV file from the JMeter attack script and the CSV Atck file that the JMeter script used for the test plan.
* **atckResults_1.py** - adds for all of the test samplers the expected data types that should have been given by a clean CSV file. These types will be compared to what the script actually got to conclude as to what response code should have been returned
* **atckResults_2.py** - compares the expected data type with what type the script got, and adds the expected response code (200 or 406)
* **atckResults_3.py** - compares the expected data type and what was returned to count the false/true negatives/positives for each algorithm. Returns a dictionary with ```dico[algo]['True Positive'] = integer```
	
